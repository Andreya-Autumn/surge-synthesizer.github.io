aed97a2 : Fix a problem with occasional unstable low drive distortions (#7876)
Thu, 28 Nov 2024 23:27:18 -0500
Paul

Fix a problem with occasional unstable low drive distortions (#7876)

The distortion effect used to do

input *= drive; Loopup input in table

When we added the waveshaper function versions we made it

input *= drive

if (waveshaper)
  input /= drive
  waveshaper(input, drive)
else
  lookuip

but this was usntable for very low drives.

Fix it so the first scaling only happens in the lookup branch

Also do a few other harmless protections and cleanups

Closes https://github.com/surge-synthesizer/surge/issues/7648